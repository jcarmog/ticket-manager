<p-menu #menu [model]="items" [popup]="true" appendTo="body"></p-menu>
<div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
    <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-bold text-slate-800">Teams</h2>
        <div class="flex gap-2">
            <p-button [label]="showInactive() ? 'Hide Inactive' : 'Show Inactive'"
                [icon]="showInactive() ? 'pi pi-eye-slash' : 'pi pi-eye'" [outlined]="true" severity="secondary"
                (onClick)="toggleInactive()"></p-button>
            <p-button label="New Team" icon="pi pi-plus" routerLink="/teams/new"></p-button>
        </div>
    </div>

    <p-table [value]="teams()" [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template pTemplate="header">
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Description</th>
                <th>Leader</th>
                <th>Members</th>
                <th>Actions</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-team>
            <tr>
                <td>{{ team.id }}</td>
                <td>{{ team.name }}</td>
                <td>{{ team.description }}</td>
                <td>
                    <div *ngIf="team.leader" class="flex items-center gap-2">
                        <p-avatar [label]="team.leader.name.charAt(0)" shape="circle"
                            [style]="{ 'background-color': '#9c27b0', 'color': '#ffffff' }">
                        </p-avatar>
                        <span>{{ team.leader.name }}</span>
                    </div>
                </td>
                <td>
                    <p-avatarGroup styleClass="mb-3">
                        <p-avatar *ngFor="let member of team.members.slice(0, 4)" [label]="member.name.charAt(0)"
                            shape="circle" [style]="{ 'background-color': '#2196F3', 'color': '#ffffff' }"
                            [title]="member.name">
                        </p-avatar>
                        <p-avatar *ngIf="team.members.length > 4" [label]="'+' + (team.members.length - 4)"
                            shape="circle" [style]="{ 'background-color': '#9E9E9E', 'color': '#ffffff' }">
                        </p-avatar>
                    </p-avatarGroup>
                </td>
                <td>
                    <p-button icon="pi pi-ellipsis-v" [rounded]="true" [text]="true" severity="secondary"
                        (click)="showMenu(menu, $event, team)"></p-button>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="6" class="text-center p-4 text-slate-500">No teams found.</td>
            </tr>
        </ng-template>
    </p-table>
</div>
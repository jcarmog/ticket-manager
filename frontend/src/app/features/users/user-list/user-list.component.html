<div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
    <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-bold text-slate-800">Users</h2>
        <div class="flex gap-2">
            <p-button [label]="showInactive() ? 'Hide Inactive' : 'Show Inactive'"
                [icon]="showInactive() ? 'pi pi-eye-slash' : 'pi pi-eye'" [outlined]="true" severity="secondary"
                (onClick)="toggleInactive()"></p-button>
        </div>
    </div>

    <p-table [value]="users()" [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template pTemplate="header">
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Email</th>
                <th>Role</th>
                <th>Teams</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-user>
            <tr>
                <td>{{ user.id }}</td>
                <td>
                    <div class="flex items-center gap-2">
                        <p-avatar [label]="user.name.charAt(0)" shape="circle"
                            [style]="{ 'background-color': '#9c27b0', 'color': '#ffffff' }">
                        </p-avatar>
                        <span>{{ user.name }}</span>
                    </div>
                </td>
                <td>{{ user.email }}</td>
                <td>
                    <span [class]="'px-2 py-1 rounded text-xs font-medium ' + 
                        (user.role === 'ADMIN' ? 'bg-purple-100 text-purple-700' : 'bg-slate-100 text-slate-700')">
                        {{ user.role }}
                    </span>
                </td>
                <td>
                    <div class="flex flex-wrap gap-1">
                        <span *ngFor="let team of user.teams"
                            class="px-2 py-0.5 rounded text-xs bg-blue-50 text-blue-600 border border-blue-100">
                            {{ team.name }}
                        </span>
                        <span *ngIf="!user.teams?.length" class="text-slate-400 text-xs italic">No teams</span>
                    </div>
                </td>
                <td>
                    <span [class]="'px-2 py-1 rounded text-xs font-medium ' + 
                        (user.active ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700')">
                        {{ user.active ? 'Active' : 'Inactive' }}
                    </span>
                </td>
                <td>
                    <p-button icon="pi pi-pencil" [rounded]="true" [text]="true" severity="secondary"
                        [routerLink]="['/users', user.id]" pTooltip="Edit User" tooltipPosition="top"></p-button>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="7" class="text-center p-4 text-slate-500">No users found.</td>
            </tr>
        </ng-template>
    </p-table>
</div>
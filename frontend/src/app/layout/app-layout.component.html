<p-toast></p-toast>
<div class="min-h-screen flex flex-col bg-slate-50">
    <!-- Navbar -->
    <nav class="bg-white border-b border-slate-200 px-6 py-3 flex justify-between items-center sticky top-0 z-50">
        <div class="flex items-center gap-3">
            <div class="w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-bold">
                TM
            </div>
            <span class="font-semibold text-lg text-slate-800">Ticket Manager</span>
        </div>

        <div class="flex items-center gap-4" *ngIf="authService.currentUser() as user">
            <div class="flex flex-col items-end">
                <span class="text-sm text-slate-600 hidden md:block">{{ user.name }}</span>
                <span *ngIf="user.teams && user.teams.length > 0" class="text-xs text-slate-500 hidden md:block"
                    [title]="getTeamNames(user)">
                    {{ getTeamNames(user) }}
                </span>
            </div>
            <div class="cursor-pointer hover:opacity-80 transition-opacity" (click)="navigateToProfile()">
                <p-avatar [image]="user.avatarUrl" [label]="!user.avatarUrl ? user.name.charAt(0) : undefined"
                    styleClass="bg-indigo-100 text-indigo-700 font-semibold" shape="circle">
                </p-avatar>
            </div>
            <p-button icon="pi pi-sign-out" [rounded]="true" [text]="true" severity="secondary"
                (onClick)="authService.logout()">
            </p-button>
        </div>
    </nav>

    <div class="flex flex-1">
        <!-- Sidebar -->
        <aside class="w-64 bg-white border-r border-slate-200 hidden md:block">
            <div class="p-4">
                <ul class="space-y-1">
                    <li>
                        <a routerLink="/dashboard" routerLinkActive="bg-indigo-50 text-indigo-700"
                            class="flex items-center gap-3 px-3 py-2 text-slate-600 rounded-lg hover:bg-slate-50 transition-colors">
                            <i class="pi pi-home"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a routerLink="/tickets" routerLinkActive="bg-indigo-50 text-indigo-700"
                            class="flex items-center gap-3 px-3 py-2 text-slate-600 rounded-lg hover:bg-slate-50 transition-colors">
                            <i class="pi pi-ticket"></i>
                            <span>Tickets</span>
                        </a>
                    </li>
                    <li *ngIf="authService.currentUser()?.role === 'ADMIN'">
                        <a routerLink="/teams" routerLinkActive="bg-indigo-50 text-indigo-700"
                            class="flex items-center gap-3 px-3 py-2 text-slate-600 rounded-lg hover:bg-slate-50 transition-colors">
                            <i class="pi pi-users"></i>
                            <span>Teams</span>
                        </a>
                        <a routerLink="/users" routerLinkActive="bg-indigo-50 text-indigo-700"
                            class="flex items-center gap-3 px-3 py-2 text-slate-600 rounded-lg hover:bg-slate-50 transition-colors">
                            <i class="pi pi-user"></i>
                            <span>Users</span>
                        </a>
                    </li>
                </ul>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-6 overflow-auto">
            <router-outlet></router-outlet>
        </main>
    </div>
</div>